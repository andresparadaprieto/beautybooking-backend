# ========================================
# PERFIL RAILWAY - PRODUCCIÓN EN RAILWAY
# ========================================
# Usa MySQL proporcionado por Railway
# Todas las credenciales vienen de variables de entorno
# ========================================

# ========================================
# MYSQL DATABASE CONFIGURATION
# ========================================
# Railway proporciona estas variables de entorno automáticamente:
# - JDBC_DATABASE_URL
# - JDBC_DATABASE_USERNAME
# - JDBC_DATABASE_PASSWORD
# Soporta tanto SPRING_DATASOURCE_* como JDBC_*
spring.datasource.url=${SPRING_DATASOURCE_URL:${JDBC_DATABASE_URL:}}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${JDBC_DATABASE_USERNAME:}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${JDBC_DATABASE_PASSWORD:}}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver


# ========================================
# CONNECTION POOL - HIKARICP
# ========================================
# Configuración optimizada para Railway
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-init-sql=SET NAMES utf8mb4 COLLATE utf8mb4_unicode_ci

# ========================================
# JPA / HIBERNATE CONFIGURATION
# ========================================
# En producción NO gestionar el esquema con Hibernate
# Flyway se encarga de las migraciones
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.open-in-view=false

# ========================================
# LOGGING OPTIMIZADO PARA PRODUCCIÓN
# ========================================
# Menos logs para mejor rendimiento
logging.level.root=WARN
logging.level.com.beautybooking=INFO
logging.level.org.springframework.web=WARN

# ========================================
# SEGURIDAD EN PRODUCCIÓN
# ========================================
# NO exponer stack traces en producción
server.error.include-stacktrace=never
server.error.include-message=always

# ========================================
# CORS PARA FRONTEND EN VERCEL
# ========================================
# Configurar en Railway: CORS_ORIGINS=https://tu-app.vercel.app
app.cors.allowed-origins=${CORS_ORIGINS}